{"version":3,"file":"SingleFileUpload.stories-80891889.js","sources":["../../../../src/components/FileUpload/SingleFileUpload.tsx"],"sourcesContent":["import { Fade, Box } from '@mui/material';\nimport { useRejectedFileManager, FileDropzone, FileDropzoneInputBody } from '../FileDropzone';\nimport { FileUploadResults } from './FileUploadResults';\nimport { useFileUploadManager, useFileUploader, type FileUploaderObservers } from '../../hooks';\nimport { type BaseFileUploadProps } from './types';\nimport { type ReactNode, useMemo } from 'react';\n\nexport type SingleFileUploadProps<Response = string> = BaseFileUploadProps<Response>;\n\nexport const SingleFileUpload = <Response = string,>(props: SingleFileUploadProps<Response>): ReactNode => {\n  const {\n    uploadService,\n    acceptsOnly,\n    onSuccessfulUpload,\n    fileManager,\n    body = <FileDropzoneInputBody />,\n    sx,\n    disabled,\n  } = props;\n  const { rejectedFiles, addRejected, removeRejected } = useRejectedFileManager();\n\n  const { fileUploads, removeFileUpload, handlers } = fileManager ?? useFileUploadManager<Response>();\n  const mergedObservers = useMemo(\n    (): FileUploaderObservers<Response> => ({\n      onFileUploadStart: handlers.onFileUploadStart,\n      onFileProgressUpdate: handlers.onFileProgressUpdate,\n      onFileUploadComplete: (fu) => {\n        onSuccessfulUpload?.(fu);\n        handlers.onFileUploadComplete(fu);\n      },\n    }),\n    [handlers, onSuccessfulUpload]\n  );\n  const { upload } = useFileUploader(uploadService, mergedObservers);\n\n  const hasFiles = rejectedFiles.length + fileUploads.length > 0;\n\n  return (\n    <Box display='flex' flexDirection='column'>\n      <Fade\n        appear={false}\n        unmountOnExit\n        in={!hasFiles}\n        timeout={{\n          appear: 0,\n          enter: 500,\n          exit: 200,\n        }}\n      >\n        <Box flexGrow={1}>\n          <FileDropzone\n            disabled={disabled}\n            sx={sx?.sx}\n            allowsMultiple={false}\n            dragZoneSx={sx != null ? sx.dragZoneSx : () => ({ borderRadius: '5px' })}\n            dropZoneSx={sx != null ? sx.dropZoneSx : { borderRadius: '5px' }}\n            onFilesAccepted={upload}\n            onFilesRejected={addRejected}\n            acceptsOnly={acceptsOnly}\n          >\n            {body}\n          </FileDropzone>\n        </Box>\n      </Fade>\n      <Fade in={hasFiles} style={{ transitionDelay: '200ms' }}>\n        <FileUploadResults\n          rejected={rejectedFiles}\n          failed={fileUploads.failed}\n          inProgress={fileUploads.inProgress}\n          successful={onSuccessfulUpload != null ? [] : fileUploads.successful}\n          onRetry={upload}\n          onDismissRejected={removeRejected}\n          onRemoveFileUpload={removeFileUpload}\n        />\n      </Fade>\n    </Box>\n  );\n};\n"],"names":["SingleFileUpload","props","uploadService","acceptsOnly","onSuccessfulUpload","fileManager","body","jsx","FileDropzoneInputBody","sx","disabled","rejectedFiles","addRejected","removeRejected","useRejectedFileManager","fileUploads","removeFileUpload","handlers","useFileUploadManager","mergedObservers","useMemo","fu","upload","useFileUploader","hasFiles","jsxs","Box","Fade","FileDropzone","FileUploadResults"],"mappings":"gVASO,MAAAA,EAAAC,GAAA,CACL,KAAA,CAAM,cAAAC,EACJ,YAAAC,EACA,mBAAAC,EACA,YAAAC,EACA,KAAAC,EAAAC,EAAAC,EAAA,EAAA,EAC8B,GAAAC,EAC9B,SAAAC,CACA,EAAAT,EAEF,CAAA,cAAAU,EAAA,YAAAC,EAAA,eAAAC,CAAA,EAAAC,EAAA,EAEA,CAAA,YAAAC,EAAA,iBAAAC,EAAA,SAAAC,CAAA,EAAAZ,GAAAa,IACAC,EAAAC,EAAA,QAAwB,KAAA,CACkB,kBAAAH,EAAA,kBACV,qBAAAA,EAAA,qBACG,qBAAAI,GAAA,CAE7BjB,GAAA,MAAAA,EAAAiB,GACAJ,EAAA,qBAAAI,CAAA,CAAgC,CAClC,GACF,CAAAJ,EAAAb,CAAA,CAC6B,EAE/B,CAAA,OAAAkB,CAAA,EAAAC,EAAArB,EAAAiB,CAAA,EAEAK,EAAAb,EAAA,OAAAI,EAAA,OAAA,EAEA,OAAAU,EAAAC,EAAA,CAAA,QAAA,OAAA,cAAA,SAAA,SAAA,CAEInB,EAAAoB,EAAC,CAAA,OAAA,GACS,cAAA,GACK,GAAA,CAAAH,EACR,QAAA,CACI,OAAA,EACC,MAAA,IACD,KAAA,GACD,EACR,SAAAjB,EAAAmB,EAAA,CAAA,SAAA,EAAA,SAAAnB,EAGEqB,EAAC,CAAA,SAAAlB,EACC,GAAAD,GAAA,YAAAA,EAAA,GACQ,eAAA,GACQ,WAAAA,GAAA,KAAAA,EAAA,WAAA,KAAA,CAAA,aAAA,QACsD,WAAAA,GAAA,KAAAA,EAAA,WAAA,CAAA,aAAA,KAAA,EACP,gBAAAa,EAC9C,gBAAAV,EACA,YAAAT,EACjB,SAAAG,CAEC,CAAA,EAAA,CAEL,CAAA,EACFC,EAAAoB,EAAA,CAAA,GAAAH,EAAA,MAAA,CAAA,gBAAA,SAAA,SAAAjB,EAEEsB,EAAC,CAAA,SAAAlB,EACW,OAAAI,EAAA,OACU,WAAAA,EAAA,WACI,WAAAX,GAAA,KAAA,CAAA,EAAAW,EAAA,WACkC,QAAAO,EACjD,kBAAAT,EACU,mBAAAG,CACC,CAAA,EAAA,CAExB,CAAA,CAAA,CAGN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}